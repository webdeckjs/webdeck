{"version":3,"file":"18.js","sources":["./node_modules/@svgr/webpack/dist/index.js!./src/icons/disconnect.svg","./src/App.styles.tsx","./src/App.tsx","./src/bootstrap.tsx","./src/components/Controller/Debugger/Debugger.tsx","./src/components/Controller/Header/Header.styles.tsx","./src/components/Controller/Header/Header.tsx","./src/components/Controller/Plugin/Plugin.tsx","./src/components/Controller/Plugins/Plugins.tsx","./src/components/Controller/Profiles/Profiles.styles.tsx","./src/components/Controller/Profiles/Profiles.tsx","./src/components/Deck/Deck.styles.tsx","./src/components/Deck/Deck.tsx","./src/components/Deck/DeckFooterText/DeckFooterText.tsx","./src/components/SubSubTitle/SubSubTitle.tsx","./src/components/SubTitle/SubTitle.tsx","./src/contexts/AppContext.tsx","./src/hooks/useDeck.ts","./src/hooks/usePlugins.ts","./src/hooks/useProfiles.ts","./src/reportWebVitals.ts","./src/utils/virtualDeck.ts"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nconst SvgDisconnect = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  className: \"disconnect_svg__icon\",\n  viewBox: \"0 0 1024 1024\"\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1M446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51zM260.3 209.4a8.03 8.03 0 0 0-11.3 0L209.4 249a8.03 8.03 0 0 0 0 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3z\"\n})));\nexport default SvgDisconnect;","import styled from \"styled-components\";\n\nexport const Wrapper = styled(\"div\")(({ $hasDeck }) => ({\n  textAlign: \"center\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100vh\",\n  width: \"100vw\",\n  // transition: \"all 500ms\",\n  // background: $hasDeck\n  //   ? \"radial-gradient(circle, rgba(164,164,164,1) 0%, rgba(0,0,0,1) 100%)\"\n  //   : \"radial-gradient(circle, rgba(5,5,5,1) 0%, rgba(0,0,0,1) 100%)\",\n}));\n\n//@ts-expect-error styled ignore\nexport const Controller = styled(\"div\")<{ $isOpen: boolean }>({\n  display: ({ $isOpen }: { $isOpen: boolean }) => ($isOpen ? \"block\" : \"none\"),\n  marginLeft: 50,\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  color: \"white\",\n  // minHeight: \"80vh\",\n  maxHeight: \"80vh\",\n  overflow: \"auto\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n});\n\nexport const Settings = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  padding: \"2px 0px\",\n});\n","import { Buffer } from \"buffer\";\nimport { Controller, Settings, Wrapper } from \"./App.styles\";\n\nimport { Deck } from \"./components/Deck/Deck\";\nimport { SubSubTitle } from \"./components/SubSubTitle/SubSubTitle\";\nimport { Profiles } from \"./components/Controller/Profiles/Profiles\";\nimport { Header } from \"./components/Controller/Header/Header\";\nimport { Debugger } from \"./components/Controller/Debugger/Debugger\";\nimport { useAppContext } from \"./contexts/AppContext\";\nimport { Plugins } from \"./components/Controller/Plugins/Plugins\";\nimport { Plugin } from \"./components/Controller/Plugin/Plugin\";\nimport classNames from \"classnames\";\n\n// injected Buffer\nwindow.Buffer = Buffer;\n\nconst App = () => {\n  const { deck } = useAppContext();\n\n  return (\n    <div\n      className={classNames({\n        wrapper: true,\n        hasDeck: !!deck.current,\n      })}\n    >\n      <Wrapper>\n        {deck.current ? (\n          <>\n            <Deck />\n            <Controller\n              $isOpen={deck.selectedKey !== undefined && deck.editMode}\n            >\n              <Header />\n              <Profiles />\n              {deck.selectedKey !== undefined && (\n                <>\n                  <Settings>\n                    <SubSubTitle>currently selected key</SubSubTitle>\n                    <span>{deck.selectedKey}</span>\n                  </Settings>\n                  <Settings>\n                    <SubSubTitle>plugin</SubSubTitle>\n                    <Plugins />\n                  </Settings>\n                  <Settings>\n                    <Plugin />\n                  </Settings>\n                </>\n              )}\n              <small style={{ opacity: 0.5 }}>\n                All changes are saved automaticly.\n              </small>\n              {window.location.search.includes(\"debug\") && <Debugger />}\n            </Controller>\n          </>\n        ) : (\n          <div style={{ color: \"white\" }}>\n            <div>\n              <h1>WEB DECK</h1>\n              <p>Connect you usb device or create a virtual device.</p>\n              <br />\n            </div>\n            <button onClick={deck.tryGetStreamDeck}>Connect</button>\n            <small> -or- </small>\n            <button onClick={deck.tryCreateVirtualDeck}>\n              Create Virtual Device\n            </button>\n          </div>\n        )}\n      </Wrapper>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { AppContext } from \"./contexts/AppContext\";\nimport { usePlugins } from \"./hooks/usePlugins\";\nimport { useProfiles } from \"./hooks/useProfiles\";\nimport { useDeck } from \"./hooks/useDeck\";\n\nexport type AppContainerType = {\n  deck: ReturnType<typeof useDeck>;\n  profiles: ReturnType<typeof useProfiles>;\n  plugins: ReturnType<typeof usePlugins>;\n};\n\nexport const Container = () => {\n  const profiles = useProfiles();\n  const plugins = usePlugins();\n  const deck = useDeck(profiles, plugins);\n\n  return (\n    <AppContext.Provider value={{ deck, profiles, plugins }}>\n      <div>{!plugins.initalised && <>initialising plugins...</>}</div>\n      <App />\n    </AppContext.Provider>\n  );\n};\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\n\nroot.render(\n  <React.StrictMode>\n    <Container />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n// useEffect(() => {\n//   if (plugins.initalised && deck.initalised) {\n//     // once all plugins are loade, try initalise the modules.\n//     // console.log(\"plugins\", plugins);\n//     // const modules: Promise<unknown>[] = [];\n//     // Object.keys(profiles.profile.keys).forEach((keyIndex) => {\n//     //   const { plugin } = profiles.profile.keys[keyIndex];\n//     //   if (plugin) modules.push(plugins.loadModule(plugin));\n//     // });\n//     // Promise.all(modules).then((resp) => {\n//     //   console.log(\"!!! Modules Loaded\", resp);\n//     //   console.log(\"MODULE_CATCHE\", plugins.getModules());\n//     //   // setInitalised(true);\n//     // });\n//   }\n// }, [plugins.initalised, deck.initalised]);\n\n// if (!plugins.initalised) {\n//   return <>initialising plugin...</>;\n// }\n","import { FC, useState } from \"react\";\nimport { SubSubTitle } from \"../../SubSubTitle/SubSubTitle\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\n// TODO: remove depedancy for subtitle\nexport const Debugger: FC = () => {\n  const { profiles, plugins } = useAppContext();\n  const [open, setIsOpen] = useState(false);\n  return (\n    <div>\n      <div\n        style={{\n          justifyContent: \"space-between\",\n          display: \"flex\",\n          alignItems: \"center\",\n          padding: \"0 0 8px 0\",\n        }}\n      >\n        <SubSubTitle>debugging</SubSubTitle>\n        <button className=\"s\" onClick={() => setIsOpen(!open)}>\n          {open ? \" close\" : \"open\"}\n        </button>\n      </div>\n      <div style={{ display: open ? \"block\" : \"none\" }}>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(profiles.profiles, null, 4)}\n        </pre>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(plugins.plugins, null, 4)}\n        </pre>\n      </div>\n    </div>\n  );\n};\n","import { styled } from \"styled-components\";\n\nexport const HeaderWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  minWidth: 350,\n  paddingBottom: \"8px\",\n  marginBottom: \"10px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { HeaderWrapper } from \"./Header.styles\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Header: FC = () => {\n  const { deck } = useAppContext();\n  return (\n    <HeaderWrapper>\n      <SubTitle>Settings</SubTitle>\n      <button\n        title=\"close\"\n        className=\"s\"\n        onClick={() => deck.setSelectedKey(undefined)}\n      >\n        ×\n      </button>\n    </HeaderWrapper>\n  );\n};\n","import { FC, lazy, useEffect, useState, Suspense } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\ntype FederatedComponent = FC<{\n  config: unknown;\n  setConfig: (config: Record<string | number | symbol, unknown>) => void;\n}>;\n\nexport const Plugin: FC = () => {\n  const { plugins, profiles, deck } = useAppContext();\n  const [Plugin, setPlugin] = useState<FederatedComponent | null>(null);\n\n  const key = deck.selectedKey!;\n  const keyConfig = profiles.profile.keys[key];\n  const module = plugins.getModule(\n    plugins.pluginsById[keyConfig?.plugin]?.name\n  );\n\n  useEffect(() => {\n    if (module) {\n      const Component = lazy(() => {\n        return Promise.resolve(module);\n      });\n      setPlugin(Component);\n    } else {\n      setPlugin(null);\n    }\n  }, [module]);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"400px\",\n        outline: \"none\",\n        margin: \"8px 0\",\n        border: \"2px solid black\",\n        position: \"relative\",\n        textAlign: \"left\",\n        borderRadius: 10,\n        overflow: \"hidden\",\n      }}\n    >\n      <Suspense fallback=\"Loading System\">\n        {Plugin && keyConfig?.config ? (\n          <Plugin\n            config={keyConfig.config}\n            setConfig={(config: Record<string | number | symbol, unknown>) => {\n              profiles.setConfig(key, config);\n            }}\n          />\n        ) : (\n          <div></div>\n        )}\n      </Suspense>\n    </div>\n  );\n};\n","import { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Plugins: FC = () => {\n  const { profiles, deck, plugins } = useAppContext();\n  const selectedPlugin = profiles.profile.keys[deck.selectedKey!]?.plugin;\n  return (\n    <div>\n      <select\n        name=\"plugins\"\n        id=\"plugins\"\n        title=\"select plugin\"\n        value={selectedPlugin || \"\"}\n        onChange={(e) => profiles.setPlugin(e.target.value, deck.selectedKey!)}\n      >\n        <option value=\"\">select...</option>\n        {plugins.plugins.map((plugin) => {\n          return (\n            <option key={plugin.name} value={plugin.name}>\n              {plugin.name} {plugin.creator && `@${plugin.creator}`}\n            </option>\n          );\n        })}\n      </select>\n      <button\n        title=\"remove plugin\"\n        className=\"s\"\n        onClick={() =>\n          plugins.promptRemovePlugin(selectedPlugin, () => {\n            // once pluging removed remove bindings\n            profiles.removePlugin(selectedPlugin);\n          })\n        }\n        disabled={!selectedPlugin}\n      >\n        -\n      </button>\n      <button\n        title=\"add plugin\"\n        className=\"s\"\n        onClick={plugins.promptAddPlugin}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const ProfilesWrapper = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  paddingBottom: \"8px\",\n  marginBottom: \"5px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { FC } from \"react\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { ProfilesWrapper } from \"./Profiles.styles\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Profiles: FC = () => {\n  const { profiles } = useAppContext();\n  return (\n    <ProfilesWrapper>\n      <SubTitle>Profiles</SubTitle>\n      <div>\n        <select\n          name=\"profile\"\n          id=\"profile\"\n          title=\"select profile\"\n          value={profiles.profileName}\n          onChange={(e) => profiles.setProfileName(e.target.value)}\n        >\n          {Object.keys(profiles.profiles).map((profileKey) => {\n            return (\n              <option key={profileKey} value={profileKey}>\n                {profileKey}\n              </option>\n            );\n          })}\n        </select>\n        <button\n          disabled={profiles.profileName === \"default\"}\n          title=\"remove profile\"\n          className=\"s\"\n          onClick={profiles.promptRemoveProfile}\n        >\n          -\n        </button>\n        <button\n          title=\"new profile\"\n          className=\"s\"\n          onClick={profiles.promptAddProfile}\n        >\n          +\n        </button>\n        <button\n          title=\"export profile\"\n          className=\"s\"\n          onClick={profiles.promptExportProfile}\n        >\n          ↗\n        </button>\n      </div>\n    </ProfilesWrapper>\n  );\n};\n","import styled from \"styled-components\";\nimport Disconnect from \"../../icons/disconnect.svg\";\n\nexport const DeckWrapper = styled(\"div\")({\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  position: \"relative\",\n});\n\nexport const DeckTitle = styled(\"h1\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 20,\n  paddingBottom: 20,\n  paddingTop: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n\nexport const DeckLayout = styled(\"div\")<{ $columns: number }>(\n  ({ $columns }) => ({\n    display: \"grid\",\n    gap: \"20px\",\n    gridTemplateColumns: `repeat(${$columns}, min-content)`,\n  })\n);\n\nexport const DeckButton = styled(\"button\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"2px solid #888888\",\n  width: \"77px\",\n  height: \"77px\",\n  borderRadius: 10,\n  // testing\n  background: \"red\",\n  position: \"relative\",\n  padding: \"0\",\n  backgroundColor: \"rgb(37 37 37)\",\n  outline: \"4px solid black\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  transition: \".13s ease-in-out\",\n  cursor: \"pointer\",\n  // active\n  \"&:active:not(.editMode), &.active\": {\n    boxShadow: \"none\",\n    border: \"0px solid\",\n    backgroundColor: \"rgb(35 35 35)\",\n    \"& > div\": {\n      boxShadow: \"none\",\n      border: \"0px solid\",\n      \"& > *\": {\n        transition: \".13s ease-in-out\",\n        transform: \"translate3d(0px, 0px, 0px)\",\n      },\n    },\n  },\n  \"&.active\": {\n    //backgroundColor: \"rgb(255 0 0)\",\n  },\n  \"&.selected\": {\n    outline: \"2px dotted #ffffff9c\",\n    outlineOffset: \"5px\",\n  },\n});\n\nexport const DisconnectButton = styled(Disconnect)({\n  marginLeft: 16,\n  marginTop: 3,\n  height: 18,\n  width: 18,\n  fill: \"white\",\n  opacity: 0.5,\n  cursor: \"pointer\",\n  transition: \"all 300ms\",\n  \"&:hover\": {\n    opacity: 1,\n    fill: \"red\",\n  },\n});\n\nexport const DeckButtonContent = styled(\"div\")({\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  boxShadow:\n    \"rgb(221, 221, 221) 0px 0px 0px inset, rgb(47 47 47) -2px -2px 0px\",\n  borderRadius: 10,\n  transition: \".13s ease-in-out\",\n  zIndex: 1,\n  \"& > *\": {\n    height: \"70%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    transition: \".13s ease-in-out\",\n    transform: \"translate3d(0px, -4px, 0px)\",\n  },\n});\n","import { FC } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  DeckButton,\n  DeckButtonContent,\n  DeckLayout,\n  DeckTitle,\n  DeckWrapper,\n  DisconnectButton,\n} from \"./Deck.styles\";\nimport { useAppContext } from \"../../contexts/AppContext\";\nimport { DeckFooterText } from \"./DeckFooterText/DeckFooterText\";\n\nexport const Deck: FC = () => {\n  const { deck } = useAppContext();\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <DeckWrapper>\n        <DeckTitle>\n          {deck.current?.PRODUCT_NAME}{\" \"}\n          <span title=\"Disconect device\">\n            <DisconnectButton onClick={() => deck.disconect()} />\n          </span>\n        </DeckTitle>\n        <DeckLayout $columns={deck.current?.KEY_COLUMNS || 0}>\n          {Array.from({ length: deck.current?.NUM_KEYS || 0 }).map(\n            (_, keyIndex) => (\n              <DeckButton\n                // $editMode={deck.editMode}\n                key={keyIndex}\n                onMouseDown={() => deck.onMouseDown(keyIndex)}\n                onMouseUp={() => deck.onMouseUp(keyIndex)}\n                onClick={() => {\n                  if (deck.editMode) {\n                    deck.setSelectedKey(keyIndex);\n                  }\n                }}\n                className={classNames({\n                  active: deck.pressedMap[keyIndex],\n                  selected: deck.editMode && deck.selectedKey === keyIndex,\n                  editMode: deck.editMode,\n                })}\n              >\n                <DeckButtonContent>\n                  <p>{keyIndex}</p>\n                </DeckButtonContent>\n              </DeckButton>\n            )\n          )}\n        </DeckLayout>\n      </DeckWrapper>\n      <DeckFooterText />\n    </div>\n  );\n};\n","import { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const DeckFooterText = () => {\n  const { deck } = useAppContext();\n  if (!deck.isVirtual) return null;\n\n  return (\n    <small\n      style={{\n        color: \"white\",\n        paddingTop: 20,\n        opacity: 0.2,\n        fontSize: 12,\n      }}\n    >\n      You are currently in {deck.editMode ? \"Edit Mode\" : \"Preview Mode\"}.\n      Switch to{\" \"}\n      <a\n        href=\"#\"\n        onClick={(e) => {\n          e.preventDefault();\n          deck.setEditMode(!deck.editMode);\n        }}\n      >\n        {deck.editMode ? \"Preview Mode\" : \"Edit Mode\"}\n      </a>{\" \"}\n      to {deck.editMode ? \"test\" : \"edit\"} it.\n    </small>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const SubSubTitle = styled(\"h3\")({\n  display: \"inline-block\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 14,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n});\n","import styled from \"styled-components\";\n\nexport const SubTitle = styled(\"h2\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 16,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n","import { createContext, useContext } from \"react\";\nimport { AppContainerType } from \"../bootstrap\";\n\nexport const AppContext = createContext({} as AppContainerType);\n\nexport const useAppContext = () => {\n  return useContext(AppContext);\n};\n","import { useCallback, useEffect, useState } from \"react\";\nimport {\n  StreamDeckWeb,\n  getStreamDecks,\n  requestStreamDecks,\n} from \"@elgato-stream-deck/webhid\";\nimport {\n  VirtualDeck,\n  getVirtualDeck,\n  requestVirtualDecks,\n} from \"../utils/virtualDeck\";\nimport { usePlugins } from \"./usePlugins\";\nimport { useProfiles } from \"./useProfiles\";\n\nexport const useDeck = (\n  profiles: ReturnType<typeof useProfiles>,\n  plugins: ReturnType<typeof usePlugins>\n) => {\n  const [editMode, setEditMode] = useState(true);\n  const [selectedKey, setSelectedKey] = useState<number | undefined>(0);\n  const [virtualDeck, setVirtualDeck] = useState<VirtualDeck | null>();\n  const [streamDeck, setStreamDeck] = useState<StreamDeckWeb | null>();\n  const [pressedMap, setPressedMap] = useState<{ [key: number]: boolean }>({});\n\n  const onMouseDown = (keyIndex: number) => {\n    if (streamDeck) {\n      streamDeck!.fillKeyColor(keyIndex, 255, 0, 0);\n    } else {\n      // console.log(\"pressed key\", keyIndex);\n    }\n  };\n\n  const onMouseUp = (keyIndex: number) => {\n    if (editMode) {\n      if (streamDeck) {\n        streamDeck!.fillKeyColor(keyIndex, 0, 0, 0);\n      } else {\n        // console.log(\"pressed key\", keyIndex);\n      }\n    } else {\n      const key = profiles.profile.keys[keyIndex];\n      if (key?.plugin) {\n        const module = plugins.getModule(key.plugin);\n        try {\n          module?.onPress({ ...key, keyIndex });\n        } catch (e) {\n          console.warn(\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\n            e\n          );\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    const execute = async () => {\n      const [_streamDeck] = await getStreamDecks();\n      if (_streamDeck) {\n        setStreamDeck(_streamDeck);\n        return;\n      } else {\n        const [_virtualdeck] = getVirtualDeck();\n        if (_virtualdeck) {\n          setVirtualDeck(_virtualdeck);\n        }\n      }\n    };\n    execute();\n  }, []);\n\n  const tryGetStreamDeck = useCallback(async () => {\n    const [_streamDeck] = await requestStreamDecks();\n    if (!_streamDeck) {\n      console.error(\"Couldn’t get a Stream Deck\");\n    } else {\n      setStreamDeck(_streamDeck);\n    }\n  }, []);\n\n  const tryCreateVirtualDeck = useCallback(() => {\n    const [_virtualdeck] = requestVirtualDecks();\n    if (!_virtualdeck) {\n      console.error(\"Couldn’t get a Virtual Deck\");\n    } else {\n      setVirtualDeck(_virtualdeck);\n    }\n    console.log(_virtualdeck);\n  }, []);\n\n  const disconect = useCallback(async () => {\n    if (streamDeck) {\n      //TODO: temporary solution, untill forget is added\n      //@ISSUE: https://github.com/Julusian/node-elgato-stream-deck/issues/79\n      const [deck] = await navigator.hid.getDevices();\n      try {\n        await deck.forget();\n        await deck.close();\n      } catch (e) {\n        /*suppress error */\n      }\n      setStreamDeck(null);\n    } else if (virtualDeck) {\n      virtualDeck.close();\n      setVirtualDeck(null);\n    }\n  }, [streamDeck, virtualDeck]);\n\n  useEffect(() => {\n    const _onPressDown = (keyIndex: number) => {\n      setPressedMap((old) => ({\n        ...old,\n        [keyIndex]: true,\n      }));\n    };\n\n    const _onPressUp = (keyIndex: number) => {\n      setPressedMap((old) => ({\n        ...old,\n        [keyIndex]: false,\n      }));\n\n      // callback from plugin\n      const key = profiles.profile.keys[keyIndex];\n      if (key?.plugin) {\n        const module = plugins.getModule(key.plugin);\n        try {\n          module?.onPress({ ...key, keyIndex });\n        } catch (e) {\n          console.warn(\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\n            e\n          );\n        }\n      }\n    };\n\n    if (streamDeck) {\n      streamDeck.on(\"down\", _onPressDown);\n      streamDeck.on(\"up\", _onPressUp);\n    }\n    return () => {\n      streamDeck?.off(\"down\", _onPressDown);\n      streamDeck?.off(\"up\", _onPressUp);\n    };\n  }, [streamDeck, profiles.profile.keys]);\n\n  const current = streamDeck || virtualDeck;\n\n  return {\n    current,\n    initalised: !!current,\n    onMouseDown,\n    onMouseUp,\n    selectedKey,\n    setSelectedKey,\n    disconect,\n\n    // virtual deck stuff\n    tryCreateVirtualDeck,\n    isVirtual: !!virtualDeck,\n\n    // steam deck stuff\n    tryGetStreamDeck,\n    pressedMap,\n\n    // preview mode\n    editMode,\n    setEditMode,\n  };\n};\n\n// const addEvents = (_streamDeck: StreamDeckWeb) => {\n//   _streamDeck.on(\"down\", (keyIndex) => {\n//     setPressedMap((old) => ({\n//       ...old,\n//       [keyIndex]: true,\n//     }));\n//   });\n//   _streamDeck.on(\"up\", (keyIndex) => {\n//     setPressedMap((old) => ({\n//       ...old,\n//       [keyIndex]: false,\n//     }));\n//     console.log(onPressMap);\n//     onPressMap[keyIndex]?.();\n//   });\n// };\n\n// useEffect(() => {}, []);\n","import { init, loadRemote } from \"@module-federation/runtime/.\";\nimport { FC, useEffect, useState } from \"react\";\nimport queryString from \"query-string\";\n\nexport type Plugin = {\n  name: string;\n  creator: string;\n  versions: string[];\n  url: string;\n};\n\nexport type RemotePromise = {\n  loaded: boolean;\n  url: string;\n  name: string;\n  e?: unknown;\n};\n\ntype ModuleOnPress = {\n  config: Record<string | number, unknown>;\n  keyIndex: number;\n};\n\nexport type Module = {\n  default: FC;\n  init: () => void;\n  onPress: (params: ModuleOnPress) => void;\n};\n\nconst PLUGIN_SCOPE = \"./Plugin\";\nconst URL_CATCHE = new Set<string>();\nconst STORAGE_KEY = \"plugins\";\nconst MODULE_CATCHE = new Map<string, Module>();\n\nconst getPlugins = () => {\n  const plugins = localStorage.getItem(STORAGE_KEY);\n  if (plugins) {\n    return [...JSON.parse(plugins)];\n  }\n  return [];\n};\n\nconst storePlugins = (plugins: Plugin[]) => {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(plugins));\n};\n\nexport const usePlugins = () => {\n  const [initalised, setInitalised] = useState(false);\n  const [plugins, setPlugins] = useState<Plugin[]>(getPlugins());\n\n  const addPlugin = (obj: Plugin) => {\n    setPlugins((old) => {\n      const next = [...old, obj];\n      storePlugins(next);\n      return next;\n    });\n  };\n\n  const promptAddPlugin = async () => {\n    const input = prompt(\n      \"Add url to plugin. List of plugins: https://github.com/search?q=topic:webdeck-plugin\"\n    );\n    if (input) {\n      let name, homepage, creator;\n      try {\n        if (input.includes(\"github.com\")) {\n          // the provided a github.com link\n          const url = input.replace(\n            \"https://github.com/\",\n            \"https://api.github.com/repos/\"\n          );\n          const resp = await fetch(url);\n          const data = await resp.json();\n          if (data && data.has_pages) {\n            homepage = data.homepage;\n            [creator, name] = data.full_name.split(\"/\");\n            // console.log({ homepage, name });\n            addPlugin({ name, creator, versions: [\"1.0.0\"], url: homepage });\n          } else {\n            throw new Error(\"\");\n          }\n        } else if (input.includes(\"remoteEntry.js\")) {\n          const [_url, query] = input.split(\"?\");\n          const { name, creator, v } = queryString.parse(query);\n          if (name) {\n            addPlugin({\n              name: name as string,\n              creator: creator as string,\n              versions: [v as string],\n              url: _url.replace(\"remoteEntry.js\", \"\"),\n            });\n          } else throw new Error(\"\");\n        } else {\n          // console.log(\"input\", input);\n          // the provided some other link\n          throw new Error(\"\");\n        }\n      } catch (e) {\n        alert(\"Cound not add plugin, invalid url or repo provided.\");\n        console.error(e);\n      }\n    }\n  };\n\n  const promptRemovePlugin = (name: string, callback: () => void) => {\n    const resp = confirm(\n      \"Are you sure you want to remove this plugin and everywhere where it was used? This action is not reversable.\"\n    );\n    if (resp) {\n      setPlugins((_plugins) => {\n        const next = _plugins.filter((plugin) => plugin.name !== name);\n        storePlugins(next);\n        return next;\n      });\n      callback();\n    }\n  };\n\n  const loadScript = async (url: string, name: string) => {\n    return new Promise<RemotePromise>((resolve) => {\n      if (!url) resolve({ loaded: false, url, name });\n      if (URL_CATCHE.has(url)) {\n        resolve({ loaded: true, url, name });\n        return;\n      }\n      const element = document.createElement(\"script\");\n      element.src = url;\n      element.type = \"text/javascript\";\n      element.async = true;\n      element.onload = () => {\n        URL_CATCHE.add(url);\n        resolve({ loaded: true, url, name });\n      };\n      element.onerror = (e) => resolve({ loaded: false, url, name, e });\n\n      document.head.appendChild(element);\n    });\n  };\n\n  const loadModule = async (name: string) => {\n    let module;\n    const moduleKey = `${PLUGIN_SCOPE}-${name}`;\n    if (MODULE_CATCHE.has(moduleKey)) {\n      module = MODULE_CATCHE.get(moduleKey);\n      // console.log({ 1: true, module, name });\n    } else {\n      // console.log(\"begin loading\", name);\n      module = (await loadRemote(\n        `${name.replaceAll(\"-\", \"_\")}/${PLUGIN_SCOPE.slice(2)}`\n      )) as Module;\n      // console.log(\"loaded\", name);\n      MODULE_CATCHE.set(moduleKey, module);\n    }\n    return module;\n  };\n\n  const getModule = (name: string) => {\n    const moduleKey = `${PLUGIN_SCOPE}-${name?.replaceAll(\"-\", \"_\")}`;\n    return MODULE_CATCHE.get(moduleKey);\n  };\n\n  const getModules = () => {\n    return MODULE_CATCHE;\n  };\n\n  // initalise all plugins\n  useEffect(() => {\n    setInitalised(false);\n    // module federation config\n    const config = {\n      name: \"webdeck\",\n      remotes: plugins.map((plugin) => {\n        return {\n          name: plugin.name.replaceAll(\"-\", \"_\"),\n          entry: `${plugin.url}remoteEntry.js`,\n        };\n      }),\n    };\n\n    // configure all plugins\n    init(config);\n\n    // once plugin are configured, load them\n    const remotePromises: Promise<RemotePromise>[] = [];\n    config.remotes.forEach((remote) => {\n      remotePromises.push(loadScript(remote.entry, remote.name));\n    });\n\n    Promise.all(remotePromises).then((resolvedRemotePromises) => {\n      const remotesById = resolvedRemotePromises.reduce((prev, current) => {\n        if (!current.loaded) {\n          console.error(\n            `Webdeck: Could not load script \"${current.name}\" at ${current.url}`,\n            current.e\n          );\n        }\n        return {\n          ...prev,\n          [current.name]: current,\n        };\n      }, {} as { [key: string]: RemotePromise });\n\n      // load modules once script all loaded.\n      const modules: Promise<unknown>[] = [];\n      config.remotes.map((remote) => {\n        if (!remotesById?.[remote.name]) {\n          console.error(\n            `Webdeck: Cant initalise module \"${name}\" as script was not loaded succesfully!`\n          );\n          return module;\n        }\n        modules.push(loadModule(remote.name));\n      });\n\n      Promise.all(modules).then((resp) => {\n        // console.log(\"!!! Modules Loaded\", resp);\n        // console.log(\"MODULE_CATCHE\", getModules());\n        setInitalised(true);\n      });\n    });\n  }, [plugins]);\n\n  const pluginsById = plugins.reduce(\n    (prev, current) => ({ ...prev, [current.name]: current }),\n    {} as Record<string, Plugin>\n  );\n\n  return {\n    initalised,\n    plugins,\n    pluginsById,\n    loadScript,\n    setPlugins,\n    addPlugin,\n    promptAddPlugin,\n    promptRemovePlugin,\n    loadModule,\n    getModule,\n    getModules,\n  };\n};\n","import { useState } from \"react\";\n\nexport type Config = Record<string | number | symbol, unknown>;\n\ntype Profiles = {\n  [key: string]: Profile;\n};\n\nexport type Profile = {\n  keys: {\n    [key: string]: {\n      plugin: string;\n      config: Config;\n    };\n  };\n};\n\nconst STORAGE_KEY = \"profiles\";\n\nconst getProfiles = () => {\n  const plugins = localStorage.getItem(STORAGE_KEY);\n  if (plugins) {\n    return { ...JSON.parse(plugins) };\n  }\n  return { default: { keys: {} } };\n};\n\nconst storeProfiles = (profiles: Profiles) => {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(profiles));\n};\n\n// const getProfiles = () => {\n//   return { default: { keys: {} } };\n// };\n\nconst getProfileName = () => {\n  return \"default\";\n};\n\nexport const useProfiles = () => {\n  const [profiles, setProfiles] = useState<Profiles>(getProfiles());\n  const [profileName, setProfileName] = useState<string>(getProfileName);\n  const profile = profiles[profileName];\n\n  const updateProfile = (obj: Profile) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [profileName]: {\n          ...old[profileName],\n          ...obj,\n        },\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const setPlugin = (name: string, keyIndex: number) => {\n    updateProfile({\n      keys: {\n        ...profile.keys,\n        [keyIndex]: {\n          plugin: name,\n          config: {}, //reset config for next\n        },\n      },\n    });\n  };\n\n  const removePlugin = (name: string) => {\n    updateProfile({\n      keys: {\n        ...Object.keys(profile.keys).reduce((prev, key) => {\n          const config = profile.keys[key];\n          const match = name === config.plugin;\n          return {\n            ...prev,\n            [key]: {\n              plugin: match ? \"\" : config.plugin,\n              config: match ? {} : config.config,\n            },\n          };\n        }, {}),\n      },\n    });\n  };\n\n  const addProfile = (name: string, obj: Profile = { keys: {} }) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [name]: obj,\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const promptAddProfile = () => {\n    const _name = prompt(\n      \"What the name of the profile? Using names that already exists, will overwirte you old profile! You can use a pipe (`|`) after the name, to provide the config.\"\n    );\n    if (_name) {\n      const [name, config] = _name.split(\"|\");\n      let parseedConfig;\n      try {\n        const _p = JSON.parse(config);\n        if (_p) {\n          parseedConfig = _p;\n        }\n      } catch (e) {\n        console.log(\"invalid config provided\");\n      }\n      console.log({ name, config });\n      addProfile(name, parseedConfig);\n      setProfileName(name);\n    }\n  };\n\n  const promptRemoveProfile = () => {\n    const resp = confirm(\n      \"Are you sure you want to delete this profile? These changes are inreversable.\"\n    );\n    if (resp) {\n      setProfiles((old) => {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { [profileName]: _, ...rest } = old;\n        setProfileName(\"default\");\n        return { ...rest };\n      });\n    }\n  };\n\n  const promptExportProfile = () => {\n    prompt(\"Profile:\", `${profileName}|${JSON.stringify(profile)}`);\n  };\n\n  const setConfig = (key: number, config: Config) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          config,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  return {\n    profiles,\n    profile,\n    profileName,\n\n    setProfileName,\n    setPlugin,\n    removePlugin,\n    updateProfile,\n    addProfile,\n    promptAddProfile,\n    promptRemoveProfile,\n    promptExportProfile,\n    setConfig,\n  };\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export type VirtualDeck = {\n  PRODUCT_NAME: string;\n  NUM_KEYS: number;\n  KEY_COLUMNS: number;\n  KEY_ROWS: number;\n  close(): void;\n};\n\nconst STORAGE_KEY = \"virtualdeck\";\n\nconst close = () => {\n  localStorage.removeItem(STORAGE_KEY);\n};\n\nconst config: Record<string, VirtualDeck> = {\n  default: {\n    PRODUCT_NAME: \"VirtualDeck 2x3\",\n    NUM_KEYS: 6,\n    KEY_COLUMNS: 3,\n    KEY_ROWS: 2,\n    close,\n  },\n};\n\nexport const getVirtualDeck = (): VirtualDeck[] => {\n  const virtualdeck = localStorage.getItem(STORAGE_KEY);\n  if (virtualdeck) {\n    return [{ ...JSON.parse(virtualdeck), close }];\n  }\n  return [];\n};\n\nexport const requestVirtualDecks = (\n  key: keyof typeof config = \"default\"\n): VirtualDeck[] => {\n  const virtualdeck = config[key];\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(virtualdeck));\n  return [config[key]];\n};\n"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","props","xmlns","className","viewBox","d","Wrapper","$hasDeck","textAlign","display","alignItems","justifyContent","height","width","Controller","$isOpen","marginLeft","padding","paddingTop","border","background","borderRadius","color","maxHeight","overflow","boxShadow","Settings","window","Buffer","deck","useAppContext","wrapper","hasDeck","current","Deck","undefined","selectedKey","editMode","Header","Profiles","SubSubTitle","Plugins","Plugin","style","opacity","location","search","includes","Debugger","onClick","tryGetStreamDeck","tryCreateVirtualDeck","Container","profiles","useProfiles","plugins","usePlugins","useDeck","AppContext","value","initalised","root","document","getElementById","render","useState","open","setIsOpen","JSON","stringify","HeaderWrapper","styled","minWidth","paddingBottom","marginBottom","borderBottom","SubTitle","title","setSelectedKey","setPlugin","keyConfig","profile","keys","module","getModule","pluginsById","plugin","name","useEffect","lazy","Promise","resolve","outline","margin","position","Suspense","fallback","config","setConfig","selectedPlugin","id","onChange","e","map","creator","promptRemovePlugin","removePlugin","disabled","promptAddPlugin","ProfilesWrapper","profileName","setProfileName","profileKey","promptRemoveProfile","promptAddProfile","promptExportProfile","DeckWrapper","DeckTitle","fontSize","textTransform","DeckLayout","$columns","gap","gridTemplateColumns","DeckButton","backgroundColor","transition","cursor","transform","outlineOffset","DisconnectButton","marginTop","fill","DeckButtonContent","zIndex","flexDirection","PRODUCT_NAME","disconect","KEY_COLUMNS","Array","from","NUM_KEYS","_","keyIndex","onMouseDown","onMouseUp","active","pressedMap","selected","DeckFooterText","isVirtual","href","preventDefault","setEditMode","createContext","useContext","virtualDeck","setVirtualDeck","streamDeck","setStreamDeck","setPressedMap","execute","_streamDeck","_virtualdeck","getStreamDecks","getVirtualDeck","useCallback","requestStreamDecks","console","error","requestVirtualDecks","log","navigator","hid","getDevices","forget","close","_onPressDown","old","_onPressUp","onPress","warn","on","off","fillKeyColor","PLUGIN_SCOPE","URL_CATCHE","Set","STORAGE_KEY","MODULE_CATCHE","Map","getPlugins","localStorage","getItem","parse","storePlugins","setItem","setInitalised","setPlugins","addPlugin","obj","next","input","homepage","url","data","_url","query","v","prompt","replace","fetch","resp","json","has_pages","full_name","split","versions","Error","alert","loadScript","loaded","has","element","createElement","src","type","async","onload","add","onerror","head","appendChild","loadModule","moduleKey","get","loadRemote","replaceAll","slice","set","remotes","entry","init","remotePromises","forEach","remote","push","all","then","resolvedRemotePromises","remotesById","reduce","prev","modules","callback","confirm","_plugins","filter","getModules","getProfiles","default","storeProfiles","getProfileName","setProfiles","updateProfile","nextProfiles","addProfile","match","_name","parseedConfig","_p","rest","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","removeItem","KEY_ROWS","virtualdeck"],"mappings":"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"}